<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Movie Seat Booking</title>
    <link rel="stylesheet" href="style.css" />

    <style></style>
  </head>
  <body>
    <div>
      <img class="main-logo" src="./image/netflix.png" />
    </div>
    <h1>Next Show is in</h1>
    <div id="timer"></div>
    <div class="movie-container">
      <label style="font-size: 1em">Pick a movie:</label>
      <select id="movie">
        <option value="100">Jurassic Park (Rs.100)</option>
        <option value="120">Logan (Rs.120)</option>
        <option value="200">Avengers Infinity War (Rs.200)</option>
      </select>
    </div>

    <ul class="showcase">
      <li>
        <div id="seat" class="seat"></div>
        <small class="status" style="font-size: 1em">N/A</small>
      </li>
      <li>
        <div id="seat" class="seat selected"></div>
        <small class="status" style="font-size: 1em">Selected</small>
      </li>
      <li>
        <div id="seat" class="seat occupied"></div>
        <small class="status" style="font-size: 1em">Occupied</small>
      </li>
    </ul>

    <div class="container">
      <div class="screen"></div>

      <div class="row">
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
      </div>
      <div class="row">
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat occupied"></div>
        <div id="seat" class="seat occupied"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
      </div>
      <div class="row">
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat occupied"></div>
        <div id="seat" class="seat occupied"></div>
      </div>
      <div class="row">
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
      </div>
      <div class="row">
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat occupied"></div>
        <div id="seat" class="seat occupied"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
      </div>
      <div class="row">
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat"></div>
        <div id="seat" class="seat occupied"></div>
        <div id="seat" class="seat occupied"></div>
        <div id="seat" class="seat occupied"></div>
        <div id="seat" class="seat"></div>
      </div>
    </div>

    <p class="text" style="font-size: 1em; margin: 0px 0px 15px 0px">
      You have selected <span id="count">0</span> seats for a price of Rs.<span
        id="total"
        >0</span
      >
    </p>

    <a href="./index.html">
      <button class="btn-home">Home</button>
    </a>

    <script>
      document.getElementById('timer').innerHTML = 05 + ':' + 11;
      startTimer();

      function startTimer() {
        var presentTime = document.getElementById('timer').innerHTML;
        var timeArray = presentTime.split(/[:]+/);
        var m = timeArray[0];
        var s = checkSecond(timeArray[1] - 1);
        if (s == 59) {
          m = m - 1;
        }
        if (m < 0) {
          return;
        }

        document.getElementById('timer').innerHTML = m + ':' + s;
        console.log(m);
        setTimeout(startTimer, 1000);
      }

      function checkSecond(sec) {
        if (sec < 10 && sec >= 0) {
          sec = '0' + sec;
        } // add zero in front of numbers < 10
        if (sec < 0) {
          sec = '59';
        }
        return sec;
      }

      var count = 0;
      var seats = document.getElementsByClassName('seat');
      for (var i = 0; i < seats.length; i++) {
        var item = seats[i];

        item.addEventListener('click', (event) => {
          var price = document.getElementById('movie').value;

          if (
            !event.target.classList.contains('occupied') &&
            !event.target.classList.contains('selected')
          ) {
            count++;

            var total = count * price;
            event.target.classList.add('selected');
            document.getElementById('count').innerText = count;
            document.getElementById('total').innerText = total;
          }
        });
      }
    </script>
  </body>
</html>
